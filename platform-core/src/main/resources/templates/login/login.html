<!DOCTYPE html>
<html lang="zh_CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title th:text="${platformName}">登录</title>
    <link rel="icon" type="image/x-icon" href="http://static.platform.jwzhu.com/image/icon.ico">

    <link rel="stylesheet" href="http://static.platform.jwzhu.com/css/common.css">
    <style type="text/css">
        .login-content {
            background-color: #1b1b1b;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            display: flex;
        }

        .login-box {
            margin: auto;
            width: 20rem;
        }

        .login-box-top {
            color: #ffffff;
            text-align: center;
        }

        .login-box-body {
            margin-top: 1rem;
            padding: 0 1.5rem;
        }

        .login-box-bottom {
            margin-top: 1.5rem;
            text-align: right;
            padding: 0 2rem;
        }
    </style>
</head>
<body data-plugs="form">
<div class="login-content">
    <div class="login-box">
        <div class="login-box-top">
            <h2 th:text="${platformName}">统一管理平台</h2>
        </div>
        <div class="login-box-body">
            <form id="form_login" class="form">
                <div class="form-row">
                    <div class="form-input-group flex-1 input-x">
                        <input type="text" class="form-input" name="username" placeholder="用户名">
                    </div>
                </div>
                <div class="form-row margin-top-10">
                    <div class="form-input-group flex-1 input-x">
                        <input id="form_login_password" type="password" class="form-input input-x" name="password" placeholder="密码">
                    </div>
                </div>
            </form>
        </div>
        <div class="login-box-bottom">
            <button type="button" class="button button-x" onclick="login()">登录</button>
        </div>
    </div>
</div>
</body>
<script src="http://static.platform.jwzhu.com/js/common.js"></script>
<script type="text/javascript">
    window.onload = function () {
        document.getElementById('form_login_password').keyDownEnter(login);
    };

    let login = function () {
        let data = document.getElementById('form_login').getForm();

        Request.post({
            url: '/login/login',
            params: data,
            showMessage: false,
            success: data => {
                console.info('callback');
                sessionStorage.setItem('resourceUrls', data);
            }
        });
        console.info('finish');
    };
</script>
</html>